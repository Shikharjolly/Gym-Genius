<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gym Home Page</title>
  <link rel="stylesheet" href="./css/gstyless.css">
</head>
<body>
  <header>
    <nav>
        <div id ="nav-container">
            <h1>GymGenius</h1>
            <ul>
                <li class = "nav-element"><a class = "nav-link" href="http://localhost:2000/home.html">Home</a></li>
                <li class = "nav-element"><a class = "nav-link" href="http://localhost:2000/Profilep.html">Profile</a></li>
                <li class = "nav-element"><a class = "nav-link" href="http://localhost:2000/event.html">Events</a></li>
                <li class = "nav-element"><a class = "nav-link" href="http://localhost:2000/Workout.html">Workouts</a></li>
            </ul>
        </div>
    </nav> 
    <section id="home" class="heading-banner">
        <div class="banner-content">
            <h2>The smarter way to track you workouts!</h2> 
        </div>
    </section>
</header>
   
<div class="content-wrapper">
  <section class="profile">
    <div class = "profile-content">
      <img id ="profilr-photo" src="default-profile.png" alt="User Photo" class="profile-photo">
     <div class="profile-info">
      <p id="username">Loading...</p>
      <p id="email"></p>
      <p id="bio"></p>
      <a href="login.html" id="logout">Logout</a>  
     </div>
    </div>
  </section>
</div>

<main>
  <div class="content-wrapper">
    <section class="workouts">
      <h2>Manage Your Workouts</h2>
      <div class="flex-container">
        <form class="workout-form">
          <input type="text" id="workout-input" placeholder="Add a new workout">
          <button type="button" onclick="addWorkout()"><a href="Workout.html">Add Workout</a></button>
        </form>
        <ul id="workout-list"></ul>
      </div>
    </section>
    <section class="events">
      <h2>Upcoming Gym Events</h2>
      <form class="event-form">
        <input type="text" id="event-input" placeholder="Add a new event">
        <button type="button" onclick="addEvent()"><a href="event.html">Add Events</a></button>
      </form>
      <div class="events-slider" id="events-slider">
        <!-- Events will be added here -->
      </div>
      <div class="events-nav">
        <button onclick="prevSlide()">Previous</button>
        <button onclick="nextSlide()">Next</button>
      </div>
    </section>
  </div>
</main>
<!-- <script src="gscripts.js"></script> -->
<script>
 
  document.addEventListener('DOMContentLoaded', async () => {
   
const token = localStorage.getItem('token');
if (!token) {
  window.location.href = 'login.html';
  return;
}

// Fetch profile data
const response = await fetch('/profile', {
  headers: { 'Authorization': token }
});

if (response.ok) {
  const user = await response.json();
  document.getElementById('username').innerText = `Username: ${user.username}`;
  document.getElementById('email').innerText = `Email: ${user.email}`;
  document.getElementById('bio').innerText = `Bio: ${user.bio}`;
} else {
  alert('Error loading profile');
  window.location.href = 'login.html';
}
});

</script>
</body>
</html>
